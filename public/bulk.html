<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Bulk Registration â€¢ Party In Pink</title>
  <meta name="description" content="Register your group or organization for Party In Pink Zumba fundraiser. Bulk registration for teams, clubs, and corporate groups available." />
  <meta name="keywords" content="bulk registration, group registration, corporate event, team registration, party in pink" />
  <meta name="theme-color" content="#E91E63" />
  <meta property="og:title" content="Bulk Registration â€¢ Party In Pink" />
  <meta property="og:description" content="Register your group for Party In Pink Zumba fundraiser. Minimum 12 passes for community clubs, 20 for universities." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://pip.rotaractjpnagar.org/bulk.html" />
  <meta property="og:image" content="https://pip.rotaractjpnagar.org/assets/images/IMG_7757.webp" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Bulk Registration â€¢ Party In Pink" />
  <meta name="twitter:description" content="Register your group for the Zumba fundraiser on December 14, 2025" />
  <meta name="twitter:image" content="https://pip.rotaractjpnagar.org/assets/images/IMG_7757.webp" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="styles.css?v=20251120-002" />
</head>

<body class="theme-pip">
  <div id="app-preloader" aria-hidden="true">
    <div class="spinner"></div>
  </div>

  <header class="site-header">
    <div class="wrap">
      <a class="brand" href="index.html">
        <img src="assets/logos/PiP_Black.png" alt="Party In Pink Logo" data-hide-onerror="1">
        <!-- <span>Party In Pink</span> -->
      </a>

      <nav class="main-nav" aria-label="Primary">
        <a href="about.html">About Us</a>
        <a href="register.html">Single Registration</a>
        <a href="bulk.html">Bulk Registration</a>
        <a href="donate.html" class="btn btn-primary btn-sm">Donate</a>
      </nav>

      <button id="navToggle" class="nav-toggle" aria-label="Toggle Menu" aria-expanded="false">
        <span></span><span></span><span></span>
      </button>
    </div>
  </header>

  <main class="section">
    <div class="wrap">
      <!-- Hero Section -->
      <div class="bulk-hero">
        <h1>ðŸ‘¥ Group Registration</h1>
        <p>Register multiple people from your community, university, or organization.</p>
      </div>

      <div class="card" style="max-width:840px;margin-inline:auto">
        <h2>Group / Club Registration</h2>
        <p class="muted">Buy multiple passes for your community, university, or corporate group.</p>

        <form id="bulkForm" class="form" autocomplete="off" novalidate>
          <label>Club type</label>
          <div class="pills" style="margin-top: 6px;">
            <button type="button" class="pill" data-type="COMMUNITY" data-selected="true">Community</button>
            <button type="button" class="pill" data-type="UNIVERSITY">University</button>
            <button type="button" class="pill" data-type="CORPORATE">Corporate</button>
          </div>

          <p id="minInfo" class="muted" style="margin-top: 8px; margin-bottom: 12px;">Minimum <span data-min-community>12</span> passes</p>

          <label>Club or organization name
            <input id="bulk_club" type="text" placeholder="e.g., Rotaract XYZ" required />
          </label>
          <label>Contact person
            <input id="bulk_name" type="text" placeholder="Your full name" required />
          </label>
          <label>Email
            <input id="bulk_email" type="email" placeholder="you@example.com" required />
          </label>
          <label>Phone
            <input id="bulk_phone" type="tel" inputmode="numeric" autocomplete="tel"
              pattern="^(?:\+?91[\s\-]?|0)?[6-9]\d{9}$" placeholder="10-digit mobile" required />
          </label>

          <label style="margin-top: 8px;">Passes</label>
          <div class="qty-control" style="margin-top: 6px;">
            <button type="button" id="minus" class="btn btn-ghost" aria-label="Decrease">âˆ’</button>
            <input id="bulk_qty" type="number" min="1" value="12" />
            <button type="button" id="plus" class="btn btn-ghost" aria-label="Increase">+</button>
          </div>

          <div class="form-msg tiny">â‚¹<span data-bulk-price>199</span> per pass</div>
          <div class="form-msg"><strong>Total: <span id="bulk_amount">â‚¹2,388</span></strong></div>

          <div class="actions">
            <button id="bulk_submit" class="btn btn-primary" type="submit">Proceed to Pay</button>
          </div>
          <noscript>
            <p class="muted">Enable JavaScript to continue.</p>
          </noscript>
        </form>
      </div>
    </div>
  </main>

  <footer class="site-footer">
    <div class="wrap">
      <div class="footer-cols">
        <div>
          <h4>Party In Pink</h4>
          <p>Rotaract Club of Bangalore JP Nagar</p>
          <p class="muted">Â© <span id="year"></span> All rights reserved.</p>
        </div>
        <nav>
          <h4>Quick Links</h4>
          <a href="register.html">Single Registration</a>
          <a href="bulk.html">Bulk Registration</a>
          <a href="donate.html">Donate</a>
        </nav>
        <div>
          <h4>Contact</h4>
          <p><a href="mailto:rotaractjpnagar@gmail.com">rotaractjpnagar@gmail.com</a></p>
          <p><a href="https://www.rotaractjpnagar.org/pip" target="_blank" rel="noopener noreferrer">rotaractjpnagar.org/pip</a>
          </p>
        </div>
      </div>
    </div>
  </footer>

  <script src="utils.js?v=2025-11-23" defer></script>
  <script src="app.js?v=2025-11-20" defer></script>
  <script>
    // Phase 2: Bulk form initialization
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.getElementById('bulkForm');
      const qtyInput = document.getElementById('bulk_qty');
      const minusBtn = document.getElementById('minus');
      const plusBtn = document.getElementById('plus');
      const amountDisplay = document.getElementById('bulk_amount');
      const pricePerPass = 199;
      
      // Quantity controls
      function updateAmount() {
        const qty = parseInt(qtyInput.value) || 12;
        const total = qty * pricePerPass;
        amountDisplay.textContent = 'â‚¹' + total.toLocaleString('en-IN');
      }
      
      minusBtn?.addEventListener('click', () => {
        const min = parseInt(qtyInput.min) || 1;
        qtyInput.value = Math.max(parseInt(qtyInput.value) - 1, min);
        updateAmount();
      });
      
      plusBtn?.addEventListener('click', () => {
        qtyInput.value = parseInt(qtyInput.value) + 1;
        updateAmount();
      });
      
      qtyInput?.addEventListener('change', updateAmount);
      
      // Form validation
      setupFormValidation(form, {
        bulk_club: { required: true, minLength: 3 },
        bulk_name: { required: true, minLength: 2 },
        bulk_email: { required: true, type: 'email' },
        bulk_phone: { required: true, pattern: /^(?:\+?91[-\s]?|0)?[6-9]\d{9}$/ },
        bulk_qty: { required: true, min: 12 }
      });
      
      // UTM tracking and form submission
      form?.addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const utm = captureUTMParams();
        const submitBtn = document.getElementById('bulk_submit');
        showLoadingState(submitBtn, 'Processing...');
        
        try {
          const formData = new FormData(form);
          const orderData = {
            type: 'bulk',
            club: formData.get('bulk_club'),
            name: formData.get('bulk_name'),
            email: formData.get('bulk_email'),
            phone: formData.get('bulk_phone'),
            passes: parseInt(formData.get('bulk_qty')),
            utm_source: utm.utm_source,
            utm_medium: utm.utm_medium,
            utm_campaign: utm.utm_campaign,
            utm_content: utm.utm_content,
            utm_term: utm.utm_term,
            referrer: utm.referrer
          };
          
          saveFormState('bulkOrder', orderData);
          trackEvent('bulk_order_started', { passes: orderData.passes });
          
          // Submit to backend
          const response = await fetch('/.netlify/functions/create-order', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(orderData)
          });
          
          const result = await response.json();
          if (result.payment_link) {
            saveFormState('bulkOrder', null);
            window.location.href = result.payment_link;
          } else {
            showToast(result.error || 'Failed to create order', 'error');
            hideLoadingState(submitBtn);
          }
        } catch (err) {
          showToast('Network error. Please try again.', 'error');
          hideLoadingState(submitBtn);
        }
      });
      
      // Restore form if available
      const saved = restoreFormState('bulkOrder');
      if (saved) {
        document.getElementById('bulk_club').value = saved.club || '';
        document.getElementById('bulk_name').value = saved.name || '';
        document.getElementById('bulk_email').value = saved.email || '';
        document.getElementById('bulk_phone').value = saved.phone || '';
        document.getElementById('bulk_qty').value = saved.passes || 12;
        updateAmount();
      }
    });
  </script>
</body>

</html>